

<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8">
  <title>Mutong社区</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="keywords" content="fly,layui,前端社区">
  <meta name="description" content="Fly社区是模块化前端UI框架Layui的官网社区，致力于为web开发提供强劲动力">
  <script th:src="@{/layui/layui.js}"></script>
  <script th:src="@{/mods/jquery.min.js}"></script>
  <link rel="stylesheet" th:href="@{/layui/css/layui.css}" media="all">
  <link rel="stylesheet" th:href="@{/css/global.css}">
  <link rel="stylesheet" th:href="@{/css/community.css}">
  <script th:src="@{/mods/index.js}"></script>
  <script th:src="@{/mods/detail.js}"></script>
  <script th:src="@{/mods/sweetalert.min.js}"></script>
</head>
<body>
<div th:insert="~{common/header :: nav}"></div>

<div th:insert="~{common/column :: column}"></div>

<div class="layui-container">
  <div class="layui-row layui-col-space15">
    <!--左侧导航-->
    <div class="layui-col-md8">
      <!--图片轮播-->
      <div class="test10 layui-carousel fly-panel" id="test10" >
        <div carousel-item="">
          <div><img src="http://myforum.oss-cn-beijing.aliyuncs.com/postImages/1582867606734617c9668-8086-4c9b-867e-efda0bff78d63.png?Expires=1677475607&OSSAccessKeyId=LTAI4FsV5R1tnt8W8kqFqBYh&Signature=3xKM18EXDDD%2BQmsg%2B0t7uDC%2FMGg%3D"></div>
          <div><img src="http://myforum.oss-cn-beijing.aliyuncs.com/postImages/1582867606734617c9668-8086-4c9b-867e-efda0bff78d63.png?Expires=1677475607&OSSAccessKeyId=LTAI4FsV5R1tnt8W8kqFqBYh&Signature=3xKM18EXDDD%2BQmsg%2B0t7uDC%2FMGg%3D"></div>
          <div><img src="http://myforum.oss-cn-beijing.aliyuncs.com/postImages/15828676154187725d050-0231-4c53-898f-3df607f1e8435.png?Expires=1677475615&OSSAccessKeyId=LTAI4FsV5R1tnt8W8kqFqBYh&Signature=Pv4PoQP%2BkNpiEuGht2eXBoQMsIg%3D"></div>
          <div><img src="http://myforum.oss-cn-beijing.aliyuncs.com/postImages/15828676154187725d050-0231-4c53-898f-3df607f1e8435.png?Expires=1677475615&OSSAccessKeyId=LTAI4FsV5R1tnt8W8kqFqBYh&Signature=Pv4PoQP%2BkNpiEuGht2eXBoQMsIg%3D"></div>
          <div><img src="http://myforum.oss-cn-beijing.aliyuncs.com/postImages/15828676154187725d050-0231-4c53-898f-3df607f1e8435.png?Expires=1677475615&OSSAccessKeyId=LTAI4FsV5R1tnt8W8kqFqBYh&Signature=Pv4PoQP%2BkNpiEuGht2eXBoQMsIg%3D"></div>
          <div><img src="http://myforum.oss-cn-beijing.aliyuncs.com/postImages/15828676154187725d050-0231-4c53-898f-3df607f1e8435.png?Expires=1677475615&OSSAccessKeyId=LTAI4FsV5R1tnt8W8kqFqBYh&Signature=Pv4PoQP%2BkNpiEuGht2eXBoQMsIg%3D"></div>
          <div><img src="http://myforum.oss-cn-beijing.aliyuncs.com/postImages/15828676154187725d050-0231-4c53-898f-3df607f1e8435.png?Expires=1677475615&OSSAccessKeyId=LTAI4FsV5R1tnt8W8kqFqBYh&Signature=Pv4PoQP%2BkNpiEuGht2eXBoQMsIg%3D"></div>
        </div>
      </div>

      <!--普通导航-->
      <div class="fly-panel" style="margin-bottom: 0;">

        <div class="fly-panel-title fly-filter">
          <a th:href="@{/index(orderModel=0)}" th:class="${orderModel == 0 ? 'layui-this' : ''}">综合</a>
          <span class="fly-mid"></span>
          <a th:href="@{/templates/index(orderModel=1,specialColumn=${specialColumn})}" th:class="${orderModel == 1 ? 'layui-this' : ''}">置顶</a>
          <span class="fly-mid"></span>
          <a th:href="@{/templates/index(orderModel=2,specialColumn=${specialColumn})}" th:class="${orderModel == 2 ? 'layui-this' : ''}">最赞</a>
          <span class="fly-mid"></span>
          <a th:href="@{/templates/index(orderModel=3,specialColumn=${specialColumn})}" th:class="${orderModel == 3 ? 'layui-this' : ''}">精华</a>
          <span class="fly-filter-right layui-hide-xs">
            <a th:href="@{/templates/index(orderModel=4,specialColumn=${specialColumn})}" th:class="${orderModel == 4 ? 'layui-this' : ''}">按最新</a>
            <span class="fly-mid"></span>
            <a th:href="@{/templates/index(orderModel=5,specialColumn=${specialColumn})}" th:class="${orderModel == 5 ? 'layui-this' : ''}">按热议</a>
          </span>
        </div>

        <ul class="fly-list">
          <li th:each="map:${posts}">
            <a th:href="@{|/user/${map.user.id}|}" class="mt-avatar fly-avatar ">
              <img th:src="${map.user.headerUrl}" alt="贤心">
            </a>
            <h2>
              <a class="layui-badge" th:text="${map.column.column}">分享</a>
              <a th:href="@{|/detail/${map.post.id}|}" th:text="${map.post.title}">基于 layui 的极简社区页面模版</a>
            </h2>
            <div class="fly-list-info">
              <a th:href="@{|/user/${map.user.id}|}" link>
                <cite th:text="${map.user.nickname}">贤心</cite>
              </a>
              <span th:text="${#dates.format(map.post.modTime,'yyyy-MM-dd HH:mm')}"></span>

              <!--<span class="fly-list-kiss layui-hide-xs" title="悬赏飞吻"><i class="iconfont icon-kiss"></i> 60</span>-->
              <!--<span class="layui-badge fly-badge-accept layui-hide-xs">已结</span>-->
              <span class="fly-list-nums">
                <i class="iconfont icon-pinglun1" title="回答"></i> </i> <i th:text="${map.post.commentCount}">66</i>
              </span>
            </div>
            <div class="fly-list-badge" th:if="${map.post.type == 1}">
              <span class="layui-badge layui-bg-red">精帖</span>
            </div>
            <div class="fly-list-badge" th:if="${map.post.type == 2}">
              <span class="layui-badge layui-bg-orange">置顶</span>
            </div>
          </li>
        </ul>
        <div style="text-align: center">

          <div class="laypage-main">
            <ul class="flow-default" id="LAY_demo2">更多帖子</ul>
          </div>

          <script>
              layui.use('flow', function(){
                  var flow = layui.flow;
                  flow.load({
                      elem: '#LAY_demo2' //流加载容器
                      ,scrollElem: '#LAY_demo2' //滚动条所在元素，一般不用填，此处只是演示需要。
                      ,isAuto: false
                      ,isLazyimg: true
                      ,done: function(page, next){ //加载下一页
                          //模拟插入
                          setTimeout(function(){
                              var lis = [];
                              for(var i = 0; i < 6; i++){
                                  lis.push('123'+ ( (page-1)*6 + i + 1 ) +'"></li>')
                              }
                              next(lis.join(''), page < 6); //假设总页数为 6
                          }, 500);
                      }
                  });
              });
          </script>
        </div>

      </div>
    </div>
    <!--右侧导航-->
    <div class="layui-col-md4">
      <!--温馨通道-->
      <div class="fly-panel">
        <h3 class="fly-panel-title">温馨通道</h3>
        <ul class="fly-panel-main fly-list-static">
          <li th:each="top:${topPost}">
            <a th:href="@{|/detail/${top.id}|}" target="_blank" th:text="${top.title}">layui 的 GitHub 及 Gitee (码云) 仓库，欢迎Star</a>
          </li>

        </ul>
      </div>

      <!--签到，说明-->
      <div class="fly-panel fly-signin">
        <div class="fly-panel-title">
          签到
          <i class="fly-mid"></i>
          <a href="javascript:;" class="fly-link"  id="LAY_signinHelp">关于我</a>
          <i class="fly-mid"></i>
          <a onclick="deve()" class="fly-link" id="LAY_signinTop">活跃榜<span class="layui-badge-dot"></span></a>

        </div>
        <div class="fly-panel-main fly-signin-main">

          <th:block th:if="${sigined == false}">
          <button  th:onclick="|signIn(this);|"  id="signin" class="btn signin layui-btn layui-btn-danger" >今日签到</button>
          <span>可获得<cite>5</cite>飞吻</span>
          </th:block>
          <!-- 已签到状态 -->
          <th:block th:if="${sigined}">
            <button class="layui-btn layui-btn-disabled" th:if="${sigined}">今日已签到</button>
            <span>今日获得了<cite>5</cite>飞吻</span>
          </th:block>
        </div>
      </div>

      <!--最近访问-->
      <div class="fly-panel fly-rank fly-rank-reply" id="LAY_replyRank">
        <h3 class="fly-panel-title">最近访问</h3>
        <dl>
          <!--<i class="layui-icon fly-loading">&#xe63d;</i>-->
          <dd th:each="user:${users}">
            <a th:href="@{|/user/${user.id}|}" class="mt-avatar">
              <img th:src="${user.headerUrl}" ><cite th:text="${user.nickname}">贤心</cite><i th:text="${#dates.format(user.loginTime,'yyyy-MM-dd HH:mm')}"></i>
            </a>
          </dd>

        </dl>
      </div>
      <!--QQ群-->
      <div class="fly-panel">
        <div class="fly-panel-title">
          欢迎加入Mutong社区官方交流群
        </div>
        <div class="fly-panel-main">
          <img src="https://mutong-community.oss-cn-beijing.aliyuncs.com/%E9%BB%98%E8%AE%A4%E6%A0%87%E9%A2%98_%E6%96%B9%E5%BD%A2%E4%BA%8C%E7%BB%B4%E7%A0%81_2020-07-10-0.gif  " style="height: 350px; width: 350px;">
          <!--<a href="https://mutong-community.oss-cn-beijing.aliyuncs.com/%E9%BB%98%E8%AE%A4%E6%A0%87%E9%A2%98_%E6%96%B9%E5%BD%A2%E4%BA%8C%E7%BB%B4%E7%A0%81_2020-07-10-0.gif?Expires=1594361862&OSSAccessKeyId=TMP.3KhA4YTsYoi47g4frkP3jFh5xmnUEiH8qGbh4Eegq5GjqxJhYRfmLCN8zte4s8mg6BhRqG5YmCgRHHFc2iExJrvW1pPs1t&Signature=mNTbxzinXjCHWpjDnB%2Bi1hFEV%2Bw%3D" target="_blank" class="fly-zanzhu" time-limit="2017.09.25-2099.01.01" style="background-color: #5FB878;"></a>-->
        </div>
      </div>

      <!--广告位-->
      <div class="fly-panel">
        <div class="fly-panel-title">
          这里可作为广告区域
        </div>
        <div class="fly-panel-main">
          <a href="#" target="_blank" class="fly-zanzhu" time-limit="2017.09.25-2099.01.01" style="background-color: #5FB878;">LayIM 3.0 - layui 旗舰之作</a>
        </div>
      </div>

      <!--友情链接-->
      <div class="fly-panel fly-link">
        <h3 class="fly-panel-title">友情链接</h3>
        <dl class="fly-panel-main">
          <dd><a href="http://www.layui.com/" target="_blank">layui</a><dd>
          <dd><a href="http://jwc.tyut.edu.cn/" target="_blank">太原理工大学教务部</a><dd>
          <dd><a href="http://rjxy.tyut.edu.cn/" target="_blank">太原理工大学软件学院</a><dd>
          <dd><a href="https://qponahuijiuy.top/" target="_blank">Blog</a><dd>
          <dd><a href="mailto:xianxin@layui-inc.com?subject=%E7%94%B3%E8%AF%B7Fly%E7%A4%BE%E5%8C%BA%E5%8F%8B%E9%93%BE" class="fly-link">申请友链</a><dd>
        </dl>
      </div>

    </div>
  </div>
</div>

<div th:insert="~{common/footer :: footer}"></div>

<script th:src="@{/layui/layui.js}"></script>

<script>
    layui.use('layer', function(){ //独立版的layer无需执行这一句
        var $ = layui.jquery, layer = layui.layer; //独立版的layer无需执行这一句

        //触发事件
        var active = {
            setTop: function(){
                var that = this;
                //多窗口模式，层叠置顶
                layer.open({
                    type: 2 //此处以iframe举例
                    ,title: '当你选择该窗体时，即会在最顶端'
                    ,area: ['390px', '260px']
                    ,shade: 0
                    ,maxmin: true
                    ,offset: [ //为了演示，随机坐标
                        Math.random()*($(window).height()-300)
                        ,Math.random()*($(window).width()-390)
                    ]
                    ,content: '//layer.layui.com/test/settop.html'
                    ,btn: ['继续弹出', '全部关闭'] //只是为了演示
                    ,yes: function(){
                        $(that).click();
                    }
                    ,btn2: function(){
                        layer.closeAll();
                    }

                    ,zIndex: layer.zIndex //重点1
                    ,success: function(layero){
                        layer.setTop(layero); //重点2
                    }
                });
            } ,
            confirmTrans: function(){
                //配置一个透明的询问框
                layer.msg('你还没有登陆', {
                    time: 2000, //20s后自动关闭
                    // btn: ['明白了', '知道了', '哦']
                });
            },
            offset: function(othis){
                var type = othis.data('type')
                    ,text = othis.text();

                layer.open({
                    type: 1
                    ,offset: type //具体配置参考：http://www.layui.com/doc/modules/layer.html#offset
                    ,id: 'layerDemo'+type //防止重复弹出
                    ,content: '<div style="padding: 20px 100px;">'+ text +'</div>'
                    ,btn: '关闭全部'
                    ,btnAlign: 'c' //按钮居中
                    ,shade: 0 //不显示遮罩
                    ,yes: function(){
                        layer.closeAll();
                    }
                });
            }
        };
        $("#LAY_signinHelp").click(function () {
            //示范一个公告层
            layer.open({
                type: 1
                ,title: false //不显示标题栏
                ,closeBtn: false
                ,area: '300px;'
                ,shade: 0.8
                ,id: 'LAY_layuipro' //设定一个id，防止重复弹出
                ,btn: ['瞧瞧这小样', '残忍拒绝']
                ,btnAlign: 'c'
                ,moveType: 1 //拖拽模式，0或者1
                ,content: '<div style="padding: 50px; line-height: 22px; background-color: #393D49; color: #fff; font-weight: 300;">各位小伙伴们~<br>木同社区欢迎你们的到来~<br><br>木同社区作为一个小的互动社区，希望大家在这里留下自己的痕迹，来到这里我们就是缘分(嘻嘻^_^) <br><br>不妨交个朋友，大家相互学习，准大四软件工程专业菜鸡一枚。多多指教<br><br>感谢访问 ^_^</div>'
                ,success: function(layero){
                    var btn = layero.find('.layui-layer-btn');
                    btn.find('.layui-layer-btn0').attr({
                        href: 'https://github.com/QponahuijiuY'
                        ,target: '_blank'
                    });
                }
            });
        });
        $('#layerDemo .fly-link').on('click', function(){
            var othis = $(this), method = othis.data('method');
            active[method] ? active[method].call(this, othis) : '';
        });

    });

    layui.use(['carousel', 'form'], function(){
        var carousel = layui.carousel
            ,form = layui.form;

        //常规轮播
        carousel.render({
            elem: '#test1'
            ,arrow: 'always'
        });

        //改变下时间间隔、动画类型、高度
        carousel.render({
            elem: '#test2'
            ,interval: 1800
            ,anim: 'fade'
            ,height: '120px'
        });

        //设定各种参数
        var ins3 = carousel.render({
            elem: '#test3'
        });
        //图片轮播
        carousel.render({
            elem: '#test10'
            ,width: '778px'
            ,height: '440px'
            ,interval: 5000
        });

        //事件
        carousel.on('change(test4)', function(res){
            console.log(res)
        });

        var $ = layui.$, active = {
            set: function(othis){
                var THIS = 'layui-bg-normal'
                    ,key = othis.data('key')
                    ,options = {};

                othis.css('background-color', '#5FB878').siblings().removeAttr('style');
                options[key] = othis.data('value');
                ins3.reload(options);
            }
        };

        //监听开关
        form.on('switch(autoplay)', function(){
            ins3.reload({
                autoplay: this.checked
            });
        });

        $('.demoSet').on('keyup', function(){
            var value = this.value
                ,options = {};
            if(!/^\d+$/.test(value)) return;

            options[this.name] = value;
            ins3.reload(options);
        });

        //其它示例
        $('.demoTest .layui-btn').on('click', function(){
            var othis = $(this), type = othis.data('type');
            active[type] ? active[type].call(this, othis) : '';
        });
    });



    $(function () {
        $.get("/sigIned",{},function (data) {
            if(data.extend.sigined=="1"){
                $("#signin").attr("disabled","disabled") ;
            }
        });
    })
    function signIn(btn) {
        $.get("/signIn",{},function (data) {
            window.location.reload();
            if(data.code==1000){
                $.get("/sigIned",{},function (data) {
                    if(data.extend.sigined=="1"){
                        $("#signin").attr("disabled","disabled") ;
                    }
                });
                //禁用按钮的状态
                // $("#signin").attr("disabled","disabled") ;

                swal("签到成功", "获得5飞吻", "success",
                    {
                        buttons: false,
                        timer: 3000,

                    });
            }else{
                layer.msg(data.message, {time: 2000, icon: 5, shift: 6}, function () {});
            }
        });

    };

</script>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_30088308'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "w.cnzz.com/c.php%3Fid%3D30088308' type='text/javascript'%3E%3C/script%3E"));</script>

</body>
</html>